(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[9],{79:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"fetchBudget",(function(){return s})),n.d(r,"fetchBudgetWithCategories",(function(){return i})),n.d(r,"fetchBudgets",(function(){return d})),n.d(r,"fetchOneBudget",(function(){return f})),n.d(r,"fetchBudgetedCategories",(function(){return p})),n.d(r,"addTransaction",(function(){return b})),n.d(r,"deleteTransaction",(function(){return l})),n.d(r,"addBudget",(function(){return g})),n.d(r,"modifyBudget",(function(){return h})),n.d(r,"modifyBudgetCategory",(function(){return m})),n.d(r,"addBudgetCategory",(function(){return y})),n.d(r,"deleteBudgetCategory",(function(){return v}));var a={};n.r(a),n.d(a,"fetchAllCategories",(function(){return x}));var u=n(31),c=n.n(u),o=n(38),s=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/?_embed=transactions"));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/?_embed=budgetCategories"));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(o.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3001","/budgets"));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/budgetCategories"));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetId,r=e.data,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/transactions"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/transactions/").concat(n),{method:"DELETE"});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.data,t.next=3,fetch("".concat("http://localhost:3001","/budgets"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetId,r=e.obj,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetCategoryId,r=e.obj,t.next=3,fetch("".concat("http://localhost:3001","/budgetCategories/").concat(n),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.obj,t.next=3,fetch("".concat("http://localhost:3001","/budgetCategories/"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetCategoryId,t.next=3,fetch("".concat("http://localhost:3001","/budgetCategories/").concat(n),{method:"DELETE"});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(o.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3001","/categories/?_expand=parentCategory"));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.a={budget:r,common:a}},80:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return c}));var r=n(24),a=function(t){return{type:r.c,payload:t}},u=function(t){return{type:r.b,payload:t}},c=function(t){return{type:r.a,payload:t}}},86:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return k}));var r,a=n(31),u=n.n(a),c=n(38),o=n(23),s=n(0),i=n.n(s),d=n(39),f=n(22),p=n(4),b=new Uint8Array(16);function l(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(b)}var g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var h=function(t){return"string"===typeof t&&g.test(t)},m=[],y=0;y<256;++y)m.push((y+256).toString(16).substr(1));var v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(m[t[e+0]]+m[t[e+1]]+m[t[e+2]]+m[t[e+3]]+"-"+m[t[e+4]]+m[t[e+5]]+"-"+m[t[e+6]]+m[t[e+7]]+"-"+m[t[e+8]]+m[t[e+9]]+"-"+m[t[e+10]]+m[t[e+11]]+m[t[e+12]]+m[t[e+13]]+m[t[e+14]]+m[t[e+15]]).toLowerCase();if(!h(n))throw TypeError("Stringified UUID is invalid");return n};var x=function(t,e,n){var r=(t=t||{}).random||(t.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=r[a];return e}return v(r)},j=n(79),C=n(81),O=n(82),w=n(80);var E=function(t){var e=t.onSubmitBudget,n=void 0===e?O.noop:e,r=t.budget,a=t.budgetToEdit;return i.a.createElement(C.b,{onSubmit:n,render:function(t){var e=t.handleSubmit,n=t.form,u=t.submitting,c=t.pristine;return i.a.createElement("form",{onSubmit:e},i.a.createElement(C.a,{name:"name"},(function(t){var e=t.input,n=t.meta;return i.a.createElement("div",null,i.a.createElement("label",null,"Budget name"),i.a.createElement("br",null),i.a.createElement("label",null,"Current name: ",r.name),i.a.createElement("br",null),i.a.createElement("input",Object.assign({},e,{type:"text",placeholder:"New name"})),n.error&&n.touched&&i.a.createElement("span",null,n.error))})),i.a.createElement(C.a,{name:"totalAmount"},(function(t){var e=t.input,n=t.meta;return i.a.createElement("div",null,i.a.createElement("label",null,"Budget name"),i.a.createElement("br",null),i.a.createElement("label",null,"Current name: ",r.totalAmount),i.a.createElement("br",null),i.a.createElement("input",Object.assign({},e,{type:"number",placeholder:"New amount"})),n.error&&n.touched&&i.a.createElement("span",null,n.error))})),a.map((function(t){var e=t.name,n=t.id,r=t.budget;return i.a.createElement(C.a,{key:n,name:e,parse:function(t){return parseFloat(t,10)}},(function(t){var n=t.input,a=t.meta;return i.a.createElement("div",null,i.a.createElement("label",null,"Category name: ",e,", current amount: ",r?r.budget:"No budget"),i.a.createElement("input",Object.assign({},n,{type:"number",step:"",placeholder:"New amount"})),a.error&&a.touched&&i.a.createElement("span",null,a.error))}))})),i.a.createElement("div",{className:"buttons"},i.a.createElement("button",{type:"submit",disabled:u},"Submit"),i.a.createElement("button",{type:"button",onClick:n.reset,disabled:u||c},"Reset")))}})};var k=Object(d.b)((function(t){return{budgetId:t.budget.selectedBudgetId,actualBudgetedCategories:t.budget.budgetedCategories}}),{setBudgetedCategories:w.c})((function(t){var e=t.budgetId,n=t.actualBudgetedCategories,r=t.setBudgetedCategories,a=Object(f.d)(["budgetWithCategories",{id:e}],j.a.budget.fetchBudgetWithCategories).data,s=Object(f.d)("allCategories",j.a.common.fetchAllCategories).data,d=Object(f.d)(["oneBudget",{id:e}],j.a.budget.fetchOneBudget).data,b=Object(f.c)(j.a.budget.modifyBudget,{refetchQueries:[["budget",{id:e}],["budgetWithCategories",{id:e}]],variables:{budgetId:e}}),l=Object(o.a)(b,1)[0],g=Object(f.c)(j.a.budget.modifyBudgetCategory,{refetchQueries:[["budget",{id:e}],["budgetWithCategories",{id:e}]]}),h=Object(o.a)(g,1)[0],m=Object(f.c)(j.a.budget.addBudgetCategory,{refetchQueries:[["budget",{id:e}],["budgetWithCategories",{id:e}]]}),y=Object(o.a)(m,1)[0],v=Object(f.c)(j.a.budget.deleteBudgetCategory,{refetchQueries:[["budget",{id:e}],["budgetWithCategories",{id:e}]]}),C=Object(o.a)(v,1)[0],O=Object(p.f)(),w=s.map((function(t){var e=a.budgetCategories.find((function(e){return e.categoryId===t.id}));return{name:t.name,id:t.id,budget:e}})),k=function(){var t=Object(c.a)(u.a.mark((function t(c){var i,f,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=u.a.mark((function t(){var c,i,b,g,m,v,j,O;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Object(o.a)(p[f],2),i=c[0],b=c[1],"name"!==i){t.next=8;break}return(g=d).name=b,t.next=6,l({budgetId:e,obj:g});case 6:t.next=35;break;case 8:if("totalAmount"!==i){t.next=15;break}return(m=d).totalAmount=b,t.next=13,l({budgetId:e,obj:m});case 13:t.next=35;break;case 15:if(!b){t.next=32;break}if(!a.budgetCategories.find((function(t){return t.id===s.find((function(t){return t.name===i})).id}))){t.next=23;break}return(v=a.budgetCategories.find((function(t){return t.id===s.find((function(t){return t.name===i})).id}))).budget=b,t.next=21,h({type:"PUT",budgetCategoryId:v.id,obj:v});case 21:t.next=30;break;case 23:return j={id:x(),budget:b,budgetId:e.toString(10),categoryId:s.find((function(t){return t.name===i})).id},console.log(j),t.next=27,y({obj:j});case 27:return n.push(j),t.next=30,r(n);case 30:t.next=35;break;case 32:return O=a.budgetCategories.find((function(t){return t.categoryId===s.find((function(t){return t.name===i})).id})),t.next=35,C({budgetCategoryId:O.id});case 35:case"end":return t.stop()}}),t)})),f=0,p=Object.entries(c);case 2:if(!(f<p.length)){t.next=7;break}return t.delegateYield(i(),"t0",4);case 4:f++,t.next=2;break;case 7:O.goBack();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(E,{budget:a,budgetToEdit:w,onSubmitBudget:k})}))}}]);
//# sourceMappingURL=9.8bfb9a17.chunk.js.map