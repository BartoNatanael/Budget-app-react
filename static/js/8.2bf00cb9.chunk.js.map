{"version":3,"sources":["data/fetch/budget.fetch.js","data/fetch/common.fetch.js","data/fetch/index.js","data/actions/budget.action.js","pages/Budget/components/DeleteBudgetForm/DeleteBudgetForm.js","pages/Budget/components/DeleteBudgetForm/ChooseNewBudget.js","pages/Budget/components/DeleteBudgetForm/DeleteBudgetView.js"],"names":["fetchBudget","a","id","fetch","process","response","json","data","fetchBudgetWithCategories","fetchBudgets","fetchOneBudget","fetchBudgetedCategories","addTransaction","budgetId","method","headers","body","JSON","stringify","deleteTransaction","addBudget","modifyBudget","obj","modifyBudgetCategory","budgetCategoryId","addBudgetCategory","deleteBudgetCategory","fetchAllCategories","budget","common","selectParentCategory","type","SET_SELECTED_PARENT_CATEGORY_ID","payload","selectBudgetId","SET_BUDGET_ID","setBudgetedCategories","categories","SET_BUDGETED_CATEGORIES","DeleteBudgetForm","onSubmit","budgets","initialValues","render","handleSubmit","submitting","form","map","key","name","component","value","className","disabled","ChooseNewBudget","newBudgetList","connect","state","selectedBudgetId","useState","newIdNeeded","setNewIdNeeded","idToDelete","useQuery","API","deleteBudget","useHistory","then","console","log","budgetCategories","transactions","filter"],"mappings":"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","file":"static/js/8.2bf00cb9.chunk.js","sourcesContent":["export const fetchBudget = async({id}) => {\n    const response  = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${id}/?_embed=transactions`);\n    const data = await response.json();\n    return data;\n};\n\nexport const fetchBudgetWithCategories = async({id}) => {\n    const response  = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${id}/?_embed=budgetCategories`);\n    const data = await response.json();\n    return data;\n};\n\nexport const fetchBudgets = async() => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets`);\n    const data = await response.json();\n    return data;\n};\n\nexport const fetchOneBudget = async({id}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${id}`);\n    const data = await response.json();\n    return data;\n};\n\nexport const fetchBudgetedCategories = async({id}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${id}/budgetCategories`);\n    const data = await response.json();\n    return data;\n};\n\nexport const addTransaction = async({budgetId, data}) => {\n    const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/budgets/${budgetId}/transactions`,\n        {\n            method: \"POST\",\n            headers: {\n                'Content-type': 'application/json',\n            },\n            body: JSON.stringify(data),\n        }\n        );\n    return await response.json();\n};\n\nexport const deleteTransaction = async({id}) => {\n    const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/transactions/${id}`,\n        {\n            method: \"DELETE\"\n        }\n    )\n    return await response.json();\n}\n\nexport const addBudget = async({data}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets`,\n    {\n        method: \"POST\",\n        headers: {\n            'Content-type': 'application/json',\n        },\n        body: JSON.stringify(data),\n    }\n    );\n    return await response.json();\n}\n\nexport const modifyBudget = async({budgetId, obj}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${budgetId}`,\n    {\n        method: \"PUT\",\n        headers: {\n            'Content-type': 'application/json',\n        },\n        body: JSON.stringify(obj),\n    }\n    );\n    return await response.json();\n}\n\n\nexport const modifyBudgetCategory = async({budgetCategoryId, obj}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgetCategories/${budgetCategoryId}`,\n    {\n        method: \"PUT\",\n        headers: {\n            'Content-type': 'application/json',\n        },\n        body: JSON.stringify(obj),\n    }\n    );\n    return await response.json();\n}\n\nexport const addBudgetCategory = async({obj}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgetCategories/`,\n    {\n        method: \"POST\",\n        headers: {\n            'Content-type': 'application/json',\n        },\n        body: JSON.stringify(obj),\n    }\n    );\n    return await response.json();\n}\n\nexport const deleteBudgetCategory = async({budgetCategoryId}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgetCategories/${budgetCategoryId}`,\n    {\n        method: \"DELETE\"\n    }\n    );\n    return await response.json();\n}","export const fetchAllCategories = async() => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/categories/?_expand=parentCategory`);\n    const data = await response.json();\n    return data;\n};\n","import * as budget from './budget.fetch';\nimport * as common from './common.fetch';\n\nexport default {\n    budget,\n    common\n}","import {\n    SET_SELECTED_PARENT_CATEGORY_ID,\n    SET_BUDGET_ID,\n    SET_BUDGETED_CATEGORIES\n} from 'data/constants';\n\nexport const selectParentCategory = (id) => {\n    return {\n        type: SET_SELECTED_PARENT_CATEGORY_ID,\n        payload: id,\n    }\n};\n\nexport const selectBudgetId = (id) => {\n    return {\n        type: SET_BUDGET_ID,\n        payload: id,\n    }\n}\n\nexport const setBudgetedCategories = (categories) => {\n    return {\n        type: SET_BUDGETED_CATEGORIES,\n        payload: categories\n    }\n}","import React from 'react';\nimport { Form, Field } from 'react-final-form';\n\nfunction DeleteBudgetForm({onSubmit, budgets, id}){\n\n    return(\n        <Form\n            onSubmit={onSubmit}\n            initialValues={{budget: id}}\n            render={({handleSubmit, form, submitting}) => (\n                <form onSubmit={handleSubmit}>\n                    <h1>Delete budget</h1>\n                    {budgets.map(budget =>{\n                        return(\n                            <div key={budget.id}>\n                                <label key={budget.id}>\n                                    <Field\n                                        name='budget'\n                                        component=\"input\"\n                                        type=\"radio\"\n                                        value={budget.id}\n                                    />\n                                {budget.name}\n                                </label>\n                            </div>\n                        )\n                    })}\n                    \n                    <br/>\n                    <div className=\"buttons\">\n                        <button type=\"submit\" disabled={submitting}>\n                        Choose\n                        </button>\n                    </div>\n                </form>\n            )}\n        />\n    )\n};\n\nexport default DeleteBudgetForm;\n","import React from 'react';\nimport { Form, Field } from 'react-final-form';\n\nfunction ChooseNewBudget({onSubmit, newBudgetList, id}){\n    return(\n        <Form\n            onSubmit={onSubmit}\n            initialValues={{budget: id}}\n            render={({handleSubmit, form, submitting}) => (\n                <form onSubmit={handleSubmit}>\n                    <h1>Choose budget</h1>\n                    {newBudgetList.map(budget =>{\n                        return(\n                            <div key={budget.id}>\n                                <label key={budget.id}>\n                                    <Field\n                                        name='budget'\n                                        component=\"input\"\n                                        type=\"radio\"\n                                        value={budget.id}\n                                    />\n                                {budget.name}\n                                </label>\n                            </div>\n                        )\n                    })}\n                    \n                    <br/>\n                    <div className=\"buttons\">\n                        <button type=\"submit\" disabled={submitting}>\n                        Choose\n                        </button>\n                    </div>\n                </form>\n            )}\n        />\n    )\n};\n\nexport default ChooseNewBudget;","import React from 'react';\nimport { useQuery } from 'react-query';\nimport { useHistory } from 'react-router-dom';\nimport DeleteBudgetForm from './DeleteBudgetForm';\nimport API from 'data/fetch';\nimport { connect } from 'react-redux';\nimport { selectBudgetId } from 'data/actions/budget.action';\nimport { useState } from 'react';\nimport ChooseNewBudget from './ChooseNewBudget';\nimport budget from 'data/reducers/budget.reducer';\n\nfunction DeleteBudgetView({budgetId, selectBudgetId}){\n    const [newIdNeeded, setNewIdNeeded] = useState(false);\n    const [idToDelete, setIdToDelete] = useState(null);\n    const { data: budgets } = useQuery('budgets', API.budget.fetchBudgets);\n    const history = useHistory();\n\n    const handleSubmitDeleteBudget = ({budget}) => {\n        if(budget == budgetId){\n            setNewIdNeeded(true);\n            return;\n        } else {\n            deleteBudget();\n        }\n    };\n\n    const ChooseNewBudgetFunc = ({budget}) => {\n        selectBudgetId(budget);\n        deleteBudget();\n    }\n\n    const deleteBudget = () => {\n\n        API.budget.fetchBudgetWithCategories({idToDelete}).then(value => \n            console.log(value.budgetCategories));\n        API.budget.fetchBudget({idToDelete}).then(value => \n            value.transactions);\n        \n    }\n    return(\n        (!newIdNeeded) ?\n            <DeleteBudgetForm\n                onSubmit={handleSubmitDeleteBudget}\n                budgets={budgets}\n            /> :\n            <ChooseNewBudget\n                onSubmit={ChooseNewBudgetFunc}\n                newBudgetList={budgets.filter(budget => budget.id != budgetId)}\n            />\n    )\n}\n\nexport default connect(state => ({\n    budgetId : state.budget.selectedBudgetId,\n}),{\n    selectBudgetId\n})(DeleteBudgetView);"],"sourceRoot":""}