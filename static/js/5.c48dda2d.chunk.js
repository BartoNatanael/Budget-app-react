(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[5],{79:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"fetchBudget",(function(){return s})),n.d(r,"fetchBudgetWithCategories",(function(){return i})),n.d(r,"fetchBudgets",(function(){return d})),n.d(r,"fetchOneBudget",(function(){return f})),n.d(r,"fetchBudgetedCategories",(function(){return l})),n.d(r,"addTransaction",(function(){return p})),n.d(r,"deleteTransaction",(function(){return b})),n.d(r,"addBudget",(function(){return g})),n.d(r,"modifyBudget",(function(){return h})),n.d(r,"modifyBudgetCategory",(function(){return m})),n.d(r,"addBudgetCategory",(function(){return v})),n.d(r,"deleteBudgetCategory",(function(){return y}));var a={};n.r(a),n.d(a,"fetchAllCategories",(function(){return j}));var u=n(31),c=n.n(u),o=n(38),s=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/?_embed=transactions"));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/?_embed=budgetCategories"));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(o.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3001","/budgets"));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/budgetCategories"));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetId,r=e.data,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/transactions"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,fetch("".concat("http://localhost:3001","/transactions/").concat(n),{method:"DELETE"});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.data,t.next=3,fetch("".concat("http://localhost:3001","/budgets"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetId,r=e.obj,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetCategoryId,r=e.obj,t.next=3,fetch("".concat("http://localhost:3001","/budgetCategories/").concat(n),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.obj,t.next=3,fetch("".concat("http://localhost:3001","/budgetCategories/"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(o.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetCategoryId,t.next=3,fetch("".concat("http://localhost:3001","/budgetCategories/").concat(n),{method:"DELETE"});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(o.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3001","/categories/?_expand=parentCategory"));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.a={budget:r,common:a}},80:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return c}));var r=n(24),a=function(t){return{type:r.c,payload:t}},u=function(t){return{type:r.b,payload:t}},c=function(t){return{type:r.a,payload:t}}},83:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r=function(t){var e=Number(t);return new Intl.NumberFormat("pl",{style:"currency",currency:"PLN"}).format(e)},a=function(t){var e=new Date(t);return new Intl.DateTimeFormat("pl").format(e)}},87:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return I}));var r=n(23),a=n(2),u=n(0),c=n.n(u),o=n(39),s=n(82),i=n(78),d=n(22),f=n(79),l=n(5),p=n(3);function b(){var t=Object(p.a)(["\n    font-weight: 700;\n    color: ","\n"]);return b=function(){return t},t}function g(){var t=Object(p.a)(["\n    background-color: ",";\n"]);return g=function(){return t},t}function h(){var t=Object(p.a)(["\n    background-color: ",";\n"]);return h=function(){return t},t}function m(){var t=Object(p.a)(["\n    border: 1px solid ",";\n    padding: ","px;\n    display: flex;\n    justify-content: space-between;\n    cursor: pointer;\n"]);return m=function(){return t},t}var v=a.default.div(m(),(function(t){return t.theme.colors.gray.dark}),(function(t){return t.theme.spacing.xs})),y=Object(a.default)(v)(h(),(function(t){return t.theme.colors.gray.normal})),j=Object(a.default)(v)(g(),(function(t){return t.theme.colors.gray.light})),O=a.default.span(b(),(function(t){var e=t.theme;return t.negative?e.colors.red.normal:e.colors.green.normal})),x=n(83);var C=function(t){var e=t.name,n=t.onClick,r=t.categories,a=t.transactions,o=t.amount,s=Object(u.useMemo)((function(){if(o)return null;var t=function(){try{return r.reduce((function(t,e){return t+e.budget}),0)}catch(t){return null}}(),e=a.filter((function(t){return r.find((function(e){return e.categoryId===t.categoryId}))})).reduce((function(t,e){return t+e.amount}),0);return t?t-e:null}),[r,a,o]),i=Object(u.useMemo)((function(){return o||s}),[o,s]);return c.a.createElement(y,{onClick:n},c.a.createElement("span",null,e),c.a.createElement(O,{negative:i<0},Object(x.a)(i)))};var w=function(t){var e=t.name,n=t.item,r=t.transactions.filter((function(t){return t.categoryId===n.id})).reduce((function(t,e){return t+e.amount}),0),a=n.budget-r;return c.a.createElement(j,null,c.a.createElement("span",null,e),c.a.createElement(O,{negative:a<0},Object(x.a)(a)))},k=n(80),E=Object(a.default)("div").withConfig({displayName:"BudgetCategoryList___StyledDiv",componentId:"kmw1ta-0"})(["border-bottom:5px solid ",""],(function(t){return t.theme.colors.gray.light})),B=Object(a.default)("div").withConfig({displayName:"BudgetCategoryList___StyledDiv2",componentId:"kmw1ta-1"})(["border-top:5px solid ",""],(function(t){return t.theme.colors.gray.light}));var I=Object(o.b)((function(t){return{budgetId:t.budget.selectedBudgetId,actualBudgetedCategories:t.budget.budgetedCategories}}),{selectParentCategory:k.b,setBudgetedCategories:k.c})((function(t){var e=t.budgetId,n=t.actualBudgetedCategories,a=t.selectParentCategory,o=t.setBudgetedCategories,p=Object(d.d)(["budget",{id:e}],f.a.budget.fetchBudget).data,b=Object(d.d)("allCategories",f.a.common.fetchAllCategories).data,g=Object(d.d)(["budgetedCategories",{id:e}],f.a.budget.fetchBudgetedCategories).data,h=Object(i.a)().t;console.log(g),o(g);var m=Object(u.useMemo)((function(){return Object(s.groupBy)(n,(function(t){return b.find((function(e){return e.id===t.categoryId})).parentCategory.name}))}),[n,b]),v=Object(u.useRef)(null),y=Object(u.useCallback)((function(){v.current(),a()}),[a,v]),j=Object(u.useCallback)((function(){a(null),v.current()}),[a,v]),O=Object(u.useMemo)((function(){return Object.entries(m).map((function(t){var e=Object(r.a)(t,2),n=e[0],u=e[1];return{id:n,Trigger:function(t){var e=t.onClick;return c.a.createElement(C,{name:n,onClick:function(){e(n),a(n)},categories:u,transactions:p.transactions})},children:u.map((function(t){var e=b.find((function(e){return e.id===t.categoryId})).name;return c.a.createElement(w,{key:t.id,name:e,item:t,transactions:p.transactions})}))}}))}),[b,p.transactions,m,a]),x=Object(u.useMemo)((function(){return p.transactions.reduce((function(t,e){return t+e.amount}),0)}),[p.transactions]),k=Object(u.useMemo)((function(){return p.totalAmount-x}),[p.totalAmount,x]),I=Object(u.useMemo)((function(){return g.reduce((function(t,e){var n=p.transactions.filter((function(t){return t.id===e.id})).reduce((function(t,e){return t+e.amount}),0);return t+Math.max(n,e.budget)}),0)}),[p.transactions,g]),M=Object(u.useMemo)((function(){return p.transactions.filter((function(t){return!g.find((function(e){return e.id===t.categoryId}))}))}),[p.transactions,g]),T=Object(u.useMemo)((function(){return M.reduce((function(t,e){return t+e.amount}),0)}),[M]),N=Object(u.useMemo)((function(){return p.totalAmount-I-T}),[p.totalAmount,I,T]);return c.a.createElement("div",null,c.a.createElement(E,null,c.a.createElement(C,{name:p.name,amount:k,onClick:y})),c.a.createElement(l.f,{items:O,clickRef:v}),c.a.createElement(B,null,c.a.createElement(C,{name:h("Other Categories"),amount:N,onClick:j})),c.a.createElement(l.a,{to:"/budget/choose"},"Wybierz bud\u017cet"),c.a.createElement(l.a,{to:"/budget/add"},"Dodaj bud\u017cet"),c.a.createElement(l.a,{to:"/budget/delete"},"Usu\u0144 bud\u017cet"))}))}}]);
//# sourceMappingURL=5.c48dda2d.chunk.js.map