{"version":3,"sources":["data/fetch/budget.fetch.js","data/fetch/common.fetch.js","data/fetch/index.js","data/actions/budget.action.js","pages/Budget/components/AddBudgetForm/AddBudgetForm.js","pages/Budget/components/AddBudgetForm/AddBudgetView.js"],"names":["fetchBudget","a","id","fetch","process","response","json","data","fetchBudgetWithCategories","fetchBudgets","fetchOneBudget","fetchBudgetedCategories","addTransaction","budgetId","method","headers","body","JSON","stringify","deleteTransaction","addBudget","modifyBudget","obj","modifyBudgetCategory","budgetCategoryId","addBudgetCategory","deleteBudgetCategory","fetchAllCategories","budget","common","selectParentCategory","type","SET_SELECTED_PARENT_CATEGORY_ID","payload","selectBudgetId","SET_BUDGET_ID","setBudgetedCategories","categories","SET_BUDGETED_CATEGORIES","required","value","undefined","AddBudgetForm","onSubmitBudget","noop","onSubmit","render","handleSubmit","form","submitting","pristine","name","validate","input","meta","placeholder","error","touched","parse","parseFloat","step","className","disabled","onClick","reset","connect","useMutation","API","refetchQueries","mutate","history","useHistory","then","resp","goBack"],"mappings":"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","file":"static/js/6.649c0482.chunk.js","sourcesContent":["export const fetchBudget = async({id}) => {\n    const response  = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${id}/?_embed=transactions`);\n    const data = await response.json();\n    return data;\n};\n\nexport const fetchBudgetWithCategories = async({id}) => {\n    const response  = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${id}/?_embed=budgetCategories`);\n    const data = await response.json();\n    return data;\n};\n\nexport const fetchBudgets = async() => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets`);\n    const data = await response.json();\n    return data;\n};\n\nexport const fetchOneBudget = async({id}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${id}`);\n    const data = await response.json();\n    return data;\n};\n\nexport const fetchBudgetedCategories = async({id}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${id}/budgetCategories`);\n    const data = await response.json();\n    return data;\n};\n\nexport const addTransaction = async({budgetId, data}) => {\n    const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/budgets/${budgetId}/transactions`,\n        {\n            method: \"POST\",\n            headers: {\n                'Content-type': 'application/json',\n            },\n            body: JSON.stringify(data),\n        }\n        );\n    return await response.json();\n};\n\nexport const deleteTransaction = async({id}) => {\n    const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/transactions/${id}`,\n        {\n            method: \"DELETE\"\n        }\n    )\n    return await response.json();\n}\n\nexport const addBudget = async({data}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets`,\n    {\n        method: \"POST\",\n        headers: {\n            'Content-type': 'application/json',\n        },\n        body: JSON.stringify(data),\n    }\n    );\n    return await response.json();\n}\n\nexport const modifyBudget = async({budgetId, obj}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgets/${budgetId}`,\n    {\n        method: \"PUT\",\n        headers: {\n            'Content-type': 'application/json',\n        },\n        body: JSON.stringify(obj),\n    }\n    );\n    return await response.json();\n}\n\n\nexport const modifyBudgetCategory = async({budgetCategoryId, obj}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgetCategories/${budgetCategoryId}`,\n    {\n        method: \"PUT\",\n        headers: {\n            'Content-type': 'application/json',\n        },\n        body: JSON.stringify(obj),\n    }\n    );\n    return await response.json();\n}\n\nexport const addBudgetCategory = async({obj}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgetCategories/`,\n    {\n        method: \"POST\",\n        headers: {\n            'Content-type': 'application/json',\n        },\n        body: JSON.stringify(obj),\n    }\n    );\n    return await response.json();\n}\n\nexport const deleteBudgetCategory = async({budgetCategoryId}) => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/budgetCategories/${budgetCategoryId}`,\n    {\n        method: \"DELETE\"\n    }\n    );\n    return await response.json();\n}","export const fetchAllCategories = async() => {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/categories/?_expand=parentCategory`);\n    const data = await response.json();\n    return data;\n};\n","import * as budget from './budget.fetch';\nimport * as common from './common.fetch';\n\nexport default {\n    budget,\n    common\n}","import {\n    SET_SELECTED_PARENT_CATEGORY_ID,\n    SET_BUDGET_ID,\n    SET_BUDGETED_CATEGORIES\n} from 'data/constants';\n\nexport const selectParentCategory = (id) => {\n    return {\n        type: SET_SELECTED_PARENT_CATEGORY_ID,\n        payload: id,\n    }\n};\n\nexport const selectBudgetId = (id) => {\n    return {\n        type: SET_BUDGET_ID,\n        payload: id,\n    }\n}\n\nexport const setBudgetedCategories = (categories) => {\n    return {\n        type: SET_BUDGETED_CATEGORIES,\n        payload: categories\n    }\n}","import React from 'react';\nimport { Form, Field } from 'react-final-form';\nimport { noop } from 'lodash';\n\nconst required = value => (value ? undefined : 'This field is Required!');\n\nfunction AddBudgetForm({ onSubmitBudget = noop }){\n    return(\n        <Form\n        onSubmit={onSubmitBudget}\n        render={({ handleSubmit, form, submitting, pristine }) =>(\n            <form onSubmit={handleSubmit}>\n                <Field name=\"name\" validate={required}>\n                    {({ input, meta }) => (\n                        <div>\n                            <label>Budget name</label>\n                            <input {...input} type=\"text\" placeholder=\"Budget name\" />\n                            {meta.error && meta.touched && <span>{meta.error}</span>}\n                        </div>\n                        )}\n                </Field>\n                <Field name=\"totalAmount\" validate={required} parse={value => parseFloat(value, 10)}>\n                    {({ input, meta }) => (\n                    <div>\n                        <label>Amount</label>\n                        <input {...input} type=\"number\" step=\"10\" placeholder=\"Amount\" />\n                        {meta.error && meta.touched && <span>{meta.error}</span>}\n                    </div>\n                    )}\n                </Field>\n                <div className=\"buttons\">\n                    <button type=\"submit\" disabled={submitting}>\n                        Submit\n                    </button>\n                    <button\n                        type=\"button\"\n                        onClick={form.reset}\n                        disabled={submitting || pristine}\n                        >\n                        Reset\n                    </button>\n                </div>\n            </form>\n        )}\n        />\n    );\n};\n\nexport default AddBudgetForm;","import React from 'react';\nimport { useMutation } from 'react-query';\nimport { useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport API from 'data/fetch';\nimport AddBudgetForm from './AddBudgetForm';\nimport { selectBudgetId } from 'data/actions/budget.action';\n\nfunction AddBugetView({ selectBudgetId }){\n\n    const [mutate] = useMutation(API.budget.addBudget,{\n        refetchQueries: \n          ['budgets']\n      });\n    const history = useHistory();\n\n    const handleSubmitAddBudget = (data) => {\n        mutate({\n            data\n          }).then(()=>{\n            fetch(`${process.env.REACT_APP_API_URL}/budgets/?name=${data.name}`).then(resp => \n                resp.json()).then(resp => {\n                    const id = resp[0].id;\n                    selectBudgetId(id);\n                })\n          }).then(()=>{\n\n          }).then(()=>{\n            history.goBack();\n          })\n    }\n    \n    return(\n        <AddBudgetForm\n            onSubmitBudget={handleSubmitAddBudget}\n        />\n    )\n};\n\nexport default connect(null,{\n    selectBudgetId\n})(AddBugetView);"],"sourceRoot":""}